import{B as p,C as g,D as i,n,Y as c,F as h,Z as m,a0 as w,E as d,_ as Q,$ as v}from"./index-7048591d.js";import{_ as y,S as _,T as u,U as b,X as C,Z as L,E as f,Y as S}from"./VSheet-9456f2fd.js";const V={name:"SubjectExercise",watch:{selectedLevel:function(){this.loadJsonAndGenerateQuiz()}},data:()=>({vocabularyList:[],currentQuestionKor:null,currentQuestion:null,selectedLevel:["초급"],levels:["초급","중급","고급"],answer:"",hint:"",placeholder:"",questionType:""}),mounted(){this.loadJsonAndGenerateQuiz()},methods:{loadJsonAndGenerateQuiz(){fetch("voca.json").then(e=>e.json()).then(e=>{if(this.vocabularyList=[],this.selectedLevel.length===0){this.$swal.fire({title:"레벨을 선택해 주세요.",showConfirmButton:!1,timer:1e3,icon:"warning"}),this.selectedLevel=["초급"];return}for(let t=0;t<this.selectedLevel.length;t++)for(let s=0;s<e.length;s++)this.selectedLevel[t]===e[s].type&&this.vocabularyList.push(e[s]);this.generateQuiz()}).catch(e=>{console.error("JSON 파일을 로드하는 중 오류가 발생했습니다:",e)})},generateQuiz(){if(this.vocabularyList.length===0){console.error("JSON 파일 로드 오류.");return}this.currentQuestion=this.vocabularyList[Math.floor(Math.random()*this.vocabularyList.length)],this.displayQuestion(this.currentQuestion)},displayQuestion(e){this.currentQuestionKor=e.kor,this.currentQuestion=e,this.questionType=this.currentQuestion.type,this.updateHint(),this.updatePlaceholder(),this.$refs.answer.focus()},checkAnswer(){this.$refs.answer.blur();const e=this.answer.toLowerCase().replace(/\s/g,""),t=this.currentQuestion.eng.toLowerCase().replace(/\s/g,""),s=e===t,r={index:this.$store.state.answerHistory.length+1,questionObj:this.currentQuestion,question:this.currentQuestion.kor,questionType:"주관식",isCorrect:s,correctAnswer:this.currentQuestion.eng,userAnswer:e};this.$store.commit("addToAnswerHistory",r),s?this.$swal.fire({title:"정답입니다!",showConfirmButton:!1,timer:1e3,icon:"success"}):this.$swal.fire({title:"틀렸습니다.",text:"정답 : "+this.currentQuestion.eng,confirmButtonText:"닫기",focusDeny:!0,didOpen:()=>{document.querySelector(".swal2-confirm").focus()},icon:"error"}).then(l=>{l.isConfirmed&&setTimeout(()=>{this.$refs.answer.focus()},300)}),this.answer="",this.generateQuiz()},isViewHint(){this.showHint()},showHint(){this.$swal.fire({title:"힌트",html:`<p>${this.hint}</p>`,confirmButtonText:"닫기",icon:"question"}).then(e=>{e.isConfirmed&&setTimeout(()=>{this.$refs.answer.focus()},300)})},updateHint(){this.currentQuestion.eng.length===1?this.hint="_":this.currentQuestion.eng.length>3?this.hint=this.currentQuestion.eng[0]+" _ ".repeat(this.currentQuestion.eng.length-2)+this.currentQuestion.eng[this.currentQuestion.eng.length-1]:this.hint=this.currentQuestion.eng[0]+" _ ".repeat(this.currentQuestion.eng.length-1),this.hint+=` (${this.currentQuestion.eng.length}글자)`},updatePlaceholder(){this.placeholder="_ ".repeat(this.currentQuestion.eng.length-1)+"_"},calculateFontSize(e){if(e===""||e===null||e===void 0)return!1;const t=6,s=3,r=e.length;if(r>t){const l=t/r;return`${s*l}rem`}return`${s}rem`}}},$=e=>(Q("data-v-ab6c7535"),e=e(),v(),e),A={class:"questionTypeStyle"},T=$(()=>c("iframe",{src:"https://ads-partners.coupang.com/widgets.html?id=752950&template=banner&trackingCode=AF7411430&subId=&width=320&height=50",width:"320",height:"50",frameborder:"0",scrolling:"no",referrerpolicy:"unsafe-url",browsingtopics:""},null,-1));function q(e,t,s,r,l,o){return p(),g(_,{class:"fill-height"},{default:i(()=>[n(S,{class:"align-center text-center fill-height"},{default:i(()=>[n(u,null,{default:i(()=>[n(b,{modelValue:e.selectedLevel,"onUpdate:modelValue":t[0]||(t[0]=a=>e.selectedLevel=a),id:"selectedLevel",name:"selectedLevel",ref:"selectedLevel",items:e.levels,label:"레벨 선택",dense:"",outlined:"",chips:"",multiple:"","hide-details":"",color:"fontColor",onChange:o.loadJsonAndGenerateQuiz},null,8,["modelValue","items","onChange"])]),_:1}),n(C),n(u,{class:"questionWrapper"},{default:i(()=>[c("p",{class:"questionStyle",ref:"question",style:m({fontSize:o.calculateFontSize(e.currentQuestionKor)})},h(e.currentQuestionKor),5),c("p",A,"[ "+h(e.questionType)+" ] ",1)]),_:1}),n(L,{ref:"answer",modelValue:e.answer,"onUpdate:modelValue":t[1]||(t[1]=a=>e.answer=a),placeholder:e.placeholder,dense:"",variant:"outlined","hide-details":"",onKeyup:w(o.checkAnswer,["enter"]),color:"fontColor",class:"custom-input-field"},null,8,["modelValue","placeholder","onKeyup"]),n(u,{class:"btnWrapper"},{default:i(()=>[n(f,{class:"btn mgr",onClick:o.isViewHint,color:"mainColor"},{default:i(()=>[d("힌트")]),_:1},8,["onClick"]),n(f,{class:"btn",onClick:t[2]||(t[2]=a=>o.checkAnswer()),color:"mainColor"},{default:i(()=>[d("확인")]),_:1})]),_:1}),n(u,{style:{height:"10vh"},class:"adWrap"},{default:i(()=>[T]),_:1})]),_:1})]),_:1})}const B=y(V,[["render",q],["__scopeId","data-v-ab6c7535"]]);export{B as default};
