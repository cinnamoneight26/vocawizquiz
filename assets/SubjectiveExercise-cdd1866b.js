import{A as m}from"./AdsenseFooter-178fd377.js";import{S as g,B as w,C as Q,D as i,n,Y as c,F as h,Z as v,_ as y,E as d}from"./index-3e2f079b.js";import{_,S as C,T as u,U as L,X as S,Z as V,E as f,Y as A}from"./VSheet-3c17086a.js";const b={name:"SubjectExercise",components:{AdsenseFooter:m},watch:{selectedLevel:function(){this.loadJsonAndGenerateQuiz()}},data:()=>({vocabularyList:[],currentQuestionKor:null,currentQuestion:null,selectedLevel:["초급"],levels:["초급","중급","고급"],answer:"",hint:"",placeholder:"",questionType:""}),mounted(){this.loadJsonAndGenerateQuiz()},methods:{loadJsonAndGenerateQuiz(){fetch("voca.json").then(e=>e.json()).then(e=>{if(this.vocabularyList=[],this.selectedLevel.length===0){this.$swal.fire({title:"레벨을 선택해 주세요.",showConfirmButton:!1,timer:1e3,icon:"warning"}),this.selectedLevel=["초급"];return}for(let t=0;t<this.selectedLevel.length;t++)for(let s=0;s<e.length;s++)this.selectedLevel[t]===e[s].type&&this.vocabularyList.push(e[s]);this.generateQuiz()}).catch(e=>{console.error("JSON 파일을 로드하는 중 오류가 발생했습니다:",e)})},generateQuiz(){if(this.vocabularyList.length===0){console.error("JSON 파일 로드 오류.");return}this.currentQuestion=this.vocabularyList[Math.floor(Math.random()*this.vocabularyList.length)],this.displayQuestion(this.currentQuestion)},displayQuestion(e){this.currentQuestionKor=e.kor,this.currentQuestion=e,this.questionType=this.currentQuestion.type,this.updateHint(),this.updatePlaceholder(),this.$refs.answer.focus()},checkAnswer(){this.$refs.answer.blur();const e=this.answer.toLowerCase().replace(/\s/g,""),t=this.currentQuestion.eng.toLowerCase().replace(/\s/g,""),s=e===t,r={index:this.$store.state.answerHistory.length+1,questionObj:this.currentQuestion,question:this.currentQuestion.kor,questionType:"주관식",isCorrect:s,correctAnswer:this.currentQuestion.eng,userAnswer:e};this.$store.commit("addToAnswerHistory",r),s?this.$swal.fire({title:"정답입니다!",showConfirmButton:!1,timer:1e3,icon:"success"}):this.$swal.fire({title:"틀렸습니다.",text:"정답 : "+this.currentQuestion.eng,confirmButtonText:"닫기",focusDeny:!0,didOpen:()=>{document.querySelector(".swal2-confirm").focus()},icon:"error"}).then(l=>{l.isConfirmed&&setTimeout(()=>{this.$refs.answer.focus()},300)}),this.answer="",this.generateQuiz()},isViewHint(){this.showHint()},showHint(){this.$swal.fire({title:"힌트",html:`<p>${this.hint}</p>`,confirmButtonText:"닫기",icon:"question"}).then(e=>{e.isConfirmed&&setTimeout(()=>{this.$refs.answer.focus()},300)})},updateHint(){this.currentQuestion.eng.length===1?this.hint="_":this.currentQuestion.eng.length>3?this.hint=this.currentQuestion.eng[0]+" _ ".repeat(this.currentQuestion.eng.length-2)+this.currentQuestion.eng[this.currentQuestion.eng.length-1]:this.hint=this.currentQuestion.eng[0]+" _ ".repeat(this.currentQuestion.eng.length-1),this.hint+=` (${this.currentQuestion.eng.length}글자)`},updatePlaceholder(){this.placeholder="_ ".repeat(this.currentQuestion.eng.length-1)+"_"},calculateFontSize(e){if(e===""||e===null||e===void 0)return!1;const t=6,s=3,r=e.length;if(r>t){const l=t/r;return`${s*l}rem`}return`${s}rem`}}},$={class:"questionTypeStyle"};function T(e,t,s,r,l,o){const p=g("AdsenseFooter");return w(),Q(C,{class:"fill-height"},{default:i(()=>[n(A,{class:"align-center text-center fill-height"},{default:i(()=>[n(u,null,{default:i(()=>[n(L,{modelValue:e.selectedLevel,"onUpdate:modelValue":t[0]||(t[0]=a=>e.selectedLevel=a),id:"selectedLevel",name:"selectedLevel",ref:"selectedLevel",items:e.levels,label:"레벨 선택",dense:"",outlined:"",chips:"",multiple:"","hide-details":"",color:"fontColor",onChange:o.loadJsonAndGenerateQuiz},null,8,["modelValue","items","onChange"])]),_:1}),n(S),n(u,{class:"questionWrapper"},{default:i(()=>[c("p",{class:"questionStyle",ref:"question",style:v({fontSize:o.calculateFontSize(e.currentQuestionKor)})},h(e.currentQuestionKor),5),c("p",$,"[ "+h(e.questionType)+" ] ",1)]),_:1}),n(V,{ref:"answer",modelValue:e.answer,"onUpdate:modelValue":t[1]||(t[1]=a=>e.answer=a),placeholder:e.placeholder,dense:"",variant:"outlined","hide-details":"",onKeyup:y(o.checkAnswer,["enter"]),color:"fontColor",class:"custom-input-field"},null,8,["modelValue","placeholder","onKeyup"]),n(u,{class:"btnWrapper"},{default:i(()=>[n(f,{class:"btn mgr",onClick:o.isViewHint,color:"mainColor"},{default:i(()=>[d("힌트")]),_:1},8,["onClick"]),n(f,{class:"btn",onClick:t[2]||(t[2]=a=>o.checkAnswer()),color:"mainColor"},{default:i(()=>[d("확인")]),_:1})]),_:1}),n(u,{class:"adWrap"},{default:i(()=>[n(p)]),_:1})]),_:1})]),_:1})}const B=_(b,[["render",T],["__scopeId","data-v-17c35c7a"]]);export{B as default};
