import{A as g}from"./AdsenseFooter-fa14a13b.js";import{_ as v,S as y,T as c,U as _,X as Q,Y as w,E as L}from"./VSheet-89e0f297.js";import{S,B as h,C as p,D as r,n as o,Y as f,F as d,Z as A,T as b,V as k,U as V,E as z}from"./index-98357ca5.js";const C={name:"ObjectiveExercise",components:{AdsenseFooter:g},watch:{selectedLevel:function(){this.loadJsonAndGenerateQuiz()}},data:()=>({vocabularyList:[],currentQuestionEng:null,currentQuestion:null,options:[],selectedLevel:["초급"],levels:["초급","중급","고급"],questionType:""}),mounted(){this.loadJsonAndGenerateQuiz()},methods:{loadJsonAndGenerateQuiz(){fetch("voca.json").then(e=>e.json()).then(e=>{if(this.vocabularyList=[],this.selectedLevel.length===0){this.$swal.fire({title:"레벨을 선택해 주세요.",showConfirmButton:!1,timer:1e3,icon:"warning"}),this.selectedLevel=["초급"];return}for(let t=0;t<this.selectedLevel.length;t++)for(let s=0;s<e.length;s++)this.selectedLevel[t]===e[s].type&&this.vocabularyList.push(e[s]);this.generateQuiz()}).catch(e=>{console.error("JSON 파일을 로드하는 중 오류가 발생했습니다:",e)})},generateQuiz(){if(this.vocabularyList.length===0){console.error("JSON 파일 로드 오류.");return}this.currentQuestion=this.vocabularyList[Math.floor(Math.random()*this.vocabularyList.length)],this.options=this.generateOptions(this.currentQuestion),this.displayQuestionAndOptions(this.currentQuestion,this.options)},generateOptions(e){const t=[],s=this.vocabularyList.filter(n=>n!==e);for(let n=0;n<4;n++){const i=s.splice(Math.floor(Math.random()*s.length),1)[0];t.push(i)}t.push(e);for(let n=t.length-1;n>0;n--){const i=Math.floor(Math.random()*(n+1));[t[n],t[i]]=[t[i],t[n]]}return t},displayQuestionAndOptions(e,t){this.currentQuestionEng=e.eng,this.questionType=this.currentQuestion.type,this.currentQuestion=e,this.options=t},checkAnswer(e){const t=this.options[e].eng===this.currentQuestionEng,s={index:this.$store.state.answerHistory.length+1,questionObj:this.currentQuestion,question:this.currentQuestion.eng,questionType:"객관식",isCorrect:t,correctAnswer:this.currentQuestion.kor,userAnswer:this.options[e].kor};this.$store.commit("addToAnswerHistory",s),t?this.$swal.fire({title:"정답입니다!",showConfirmButton:!1,timer:1e3,icon:"success"}):this.$swal.fire({title:"틀렸습니다.",text:"정답 : "+this.currentQuestion.kor,confirmButtonText:"닫기",icon:"error"}),this.generateQuiz()},speakText(e){if("speechSynthesis"in window){const t=window.speechSynthesis,s=new SpeechSynthesisUtterance;s.text=e,t.speak(s)}else console.error("Web Speech API is not supported in this browser.")},calculateFontSize(e){if(e===""||e===null||e===void 0)return!1;const t=6,s=3,n=e.length;if(n>t){const i=t/n;return`${s*i}rem`}return`${s}rem`}}},O={class:"questionTypeStyle"};function E(e,t,s,n,i,u){const m=S("AdsenseFooter");return h(),p(y,{class:"fill-height"},{default:r(()=>[o(w,{class:"align-center text-center fill-height"},{default:r(()=>[o(c,null,{default:r(()=>[o(_,{modelValue:e.selectedLevel,"onUpdate:modelValue":t[0]||(t[0]=l=>e.selectedLevel=l),id:"selectedLevel",name:"selectedLevel",ref:"selectedLevel",items:e.levels,label:"레벨 선택",dense:"",outlined:"",chips:"",multiple:"","hide-details":"",color:"fontColor",onChange:t[1]||(t[1]=l=>u.loadJsonAndGenerateQuiz())},null,8,["modelValue","items"])]),_:1}),o(Q),o(c,{class:"questionWrapper"},{default:r(()=>[f("p",{class:"questionStyle",ref:"question",style:A({fontSize:u.calculateFontSize(e.currentQuestionEng)})},d(e.currentQuestionEng),5),f("p",O,"[ "+d(e.questionType)+" ] ",1)]),_:1}),o(c,{style:{display:"flex",flexDirection:"column",padding:"0px 4px"}},{default:r(()=>[(h(!0),b(V,null,k(e.options,(l,a)=>(h(),p(L,{flat:"",class:"optionsStyle",id:"option_"+a,ref_for:!0,ref:"option_"+a,variant:"plain",key:a,onClick:T=>u.checkAnswer(a)},{default:r(()=>[z(d(l.kor),1)]),_:2},1032,["id","onClick"]))),128))]),_:1}),o(c,{class:"adWrap"},{default:r(()=>[o(m)]),_:1})]),_:1})]),_:1})}const F=v(C,[["render",E],["__scopeId","data-v-06b17dac"]]);export{F as default};
